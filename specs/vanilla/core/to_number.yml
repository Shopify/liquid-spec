Casting to number (Utils.to_number, used by several filters):

  from an integer:
  - "{{0 | plus: 0}}": "0"
  - "{{10000 | plus: 0}}": "10000"

  from an bigint:
  - "{{12345678901234567890 | plus: 0}}": "12345678901234567890"

  from a float:
  - "{{123.456 | plus: 0}}": "123.456"

  from special values:
  - "{{true | plus: 0}}": "0"
  - "{{false | plus: 0}}": "0"
  - "{{null | plus: 0}}": "0"
  - "{{empty | plus: 0}}": "0"
  - "{{blank | plus: 0}}": "0"

  from undefined variables:
  - "{{undefined_variable | plus: 0}}": "0"

  from float specials:
  # yes you would think this should be NaN, not infinity. It is not.
  - "{% assign inf = 1.0 | divided_by: 0.0 %}{{inf | plus: 0}}": "Infinity"
  - "{% assign nan = 0.0 | divided_by: 0.0 %}{{nan | plus: 0}}": "NaN"
  - "{%assign n=-99.0%}{%for i in (1..99)%}{%assign n=n|times:9999%}{%endfor%}{{n|plus:0}}": "-Infinity"

  from strings:
    Empty and whitespace strings:
    - "{{'' | plus: 0}}": "0"
    - "{{' ' | plus: 0}}": "0"
    - "{{'\t123' | plus: 0}}": "123"
    - "{{'3  ' | plus: 0}}": "3"
    - "{{'4\t' | plus: 0}}": "4"

    Simple integers and floats:
    - "{{'0' | plus: 0}}": "0"
    - "{{'1' | plus: 0}}": "1"
    - "{{'-1' | plus: 0}}": "-1"
    - "{{'1.5' | plus: 0}}": "1.5"
    - "{{'-1.5' | plus: 0}}": "-1.5"
    - "{{'+123' | plus: 0}}": "123"
    - "{{'-123' | plus: 0}}": "-123"
    - "{{'  123  ' | plus: 0}}": "123"

    Large numbers:
    - "{{'9999999999999999' | plus: 0}}": "9999999999999999"
    - "{{'9223372036854775807' | plus: 0}}": "9223372036854775807"
    - "{{'-9223372036854775808' | plus: 0}}": "-9223372036854775808"
    - "{{'1000000000000000000000000000' | plus: 0}}": "1000000000000000000000000000"

    Scientific notation (not supported):
    - "{{'1e5' | plus: 0}}": "1"
    - "{{'1.0e5' | plus: 0}}": "1"
    - "{{'1.0e-5' | plus: 0}}": "1"

    Non-numeric strings:
    - "{{'abc' | plus: 0}}": "0"
    - "{{'123abc' | plus: 0}}": "123"
    - "{{'abc123' | plus: 0}}": "0"

    Different number bases (not supported):
    - "{{'0x10' | plus: 0}}": "0"
    - "{{'010' | plus: 0}}": "10"
    - "{{'0b1010' | plus: 0}}": "0"
    - "{{'-0x10' | plus: 0}}": "0"
    - "{{'-010' | plus: 0}}": "-10"
    - "{{'-0b1010' | plus: 0}}": "0"

    Underscores in numbers:
    - "{{'123_456_789' | plus: 0}}": "123456789"
    - "{{'1__2' | plus: 0}}": "1"
    - "{{'0_x10' | plus: 0}}": "0"
    - "{{'0x_10' | plus: 0}}": "0"
    - "{{'0x10_' | plus: 0}}": "0"
    - "{{'0d10_' | plus: 0}}": "10"
    - "{{'0d1_0' | plus: 0}}": "10"
    - "{{'0_d10' | plus: 0}}": "0"

    Multiple decimal points:
    - "{{'12.34.56' | plus: 0}}": "12"

    Commas in numbers (not supported):
    - "{{'1,000,000' | plus: 0}}": "1"

    Uppercase prefixes:
    - "{{'0X10' | plus: 0}}": "0"
    - "{{'0B10' | plus: 0}}": "0"
    - "{{'0D10' | plus: 0}}": "10"

    Invalid number formats:
    - "{{' 0x10' | plus: 0}}": "0"
    - "{{'0x-10' | plus: 0}}": "0"
    - "{{'--10' | plus: 0}}": "0"
    - "{{'-+1' | plus: 0}}": "0"
    - "{{'10_' | plus: 0}}": "10"
    - "{{'\0' | plus: 0}}": "0"
    - "{{'0x0x10' | plus: 0}}": "0"

    Strings with null bytes:
    - "{{'30\u0000' | plus: 0}}": "30"
    - "{{'999994474782528755400\u0000' | plus: 0}}": "999994474782528755400"
    - "{{'999994474782528755400\u0000abc' | plus: 0}}": "999994474782528755400"
    - "{{'9999944747825287554000\u0000def' | plus: 0}}": "9999944747825287554000"
    - "{{'-12345678901234567890\u0000ghi' | plus: 0}}": "-12345678901234567890"
    - "{{' \u0000' | plus: 0}}": "0"
    - "{{'\t\u0000' | plus: 0}}": "0"
    - "{{'\n\u0000' | plus: 0}}": "0"
    - "{{'\r\u0000' | plus: 0}}": "0"
    - "{{' \t\n\r\u0000' | plus: 0}}": "0"
    - "{{' 123 \u0000' | plus: 0}}": "123"
    - "{{' -456  \u0000' | plus: 0}}": "-456"
    - "{{' 7.89\t\u0000' | plus: 0}}": "Liquid error (templates/index line 1): string contains null byte"
    - "{{' +10.11 \n\u0000' | plus: 0}}": "10"
    - "{{' 1e3\r \u0000' | plus: 0}}": "1"
    - "{{' 42 \t \n \r \u0000' | plus: 0}}": "42"

    Large numbers with underscores and null bytes:
    - "{{' 1_000_000\u0000' | plus: 0}}": "1000000"
    - "{{' 9_223_372_036_854_775_807\u0000' | plus: 0}}": "9223372036854775807"
    - "{{'-9_223_372_036_854_775_808\u0000' | plus: 0}}": "-9223372036854775808"
    - "{{'1_000_000_000_000_000_000_000_000_000\u0000' | plus: 0}}": "1000000000000000000000000000"

    Edge cases with underscores, null bytes, and invalid formats:
    - "{{' 0x1_0\u0000' | plus: 0}}": "0"
    - "{{' 0b1_0\u0000' | plus: 0}}": "0"
    - "{{' 0_1_0\u0000' | plus: 0}}": "10"
    - "{{' 1__2\u0000' | plus: 0}}": "1"
    - "{{' 1_2_3_4_5\u0000' | plus: 0}}": "12345"
    - "{{' 123\u0000' | plus: 0}}": "123"
    - "{{' 123_\u0000' | plus: 0}}": "123"
    - "{{' 456\u0000abc' | plus: 0}}": "456"
    - "{{' 456_\u0000abc' | plus: 0}}": "456"
    - "{{' 789\u0000_' | plus: 0}}": "789"
    - "{{' 789_\u0000_' | plus: 0}}": "789"
    - "{{' 1_000\u0000_000' | plus: 0}}": "1000"
    - "{{' 1_000_\u0000_000' | plus: 0}}": "1000"
    - "{{' 1.23\u0000_45' | plus: 0}}": "1"
    - "{{' 1.23_\u0000_45' | plus: 0}}": "1"
    - "{{'-9876\u0000_543' | plus: 0}}": "-9876"
    - "{{'-9_876_\u0000_543' | plus: 0}}": "-9876"
    - "{{' _9223372036854775807\u0000' | plus: 0}}": "0"
    - "{{' _-9223372036854775808\u0000' | plus: 0}}": "0"
    - "{{' _18446744073709551615\u0000' | plus: 0}}": "0"
    - "{{' _18446744073709551616\u0000' | plus: 0}}": "0"
    - "{{' _1000000000000000000000000000\u0000abc' | plus: 0}}": "0"
    - "{{' 1__2__3\u0000' | plus: 0}}": "1"
    - "{{'-9__223__372__036__854__775__808\u0000' | plus: 0}}": "-9"
    - "{{' 9_223_372_036_854_775__807\u0000' | plus: 0}}": "9223372036854775"

  from ranges:
  - "{{ (1..5) | plus: 0 }}": "0"
  - "{{ (5..1) | plus: 0 }}": "0"
  - "{{ (-2..2) | plus: 0 }}": "0"
  - "{{ (1.5..5.5) | plus: 0 }}": "0"

  from drops:
  - TPL: "{{ foo | plus: 0 }}"
    EXP: "1"
    CTX: { foo: !ruby/object:IntegerDrop { context: null, value: 1 } }